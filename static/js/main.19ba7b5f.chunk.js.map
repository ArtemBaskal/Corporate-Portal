{"version":3,"sources":["actions/types.ts","components/Card.tsx","actions/cards.ts","components/MainPage.tsx","components/Catalog.tsx","components/AccessControl.tsx","components/App.tsx","reducers/selectedItemsReducer.ts","reducers/accessRightsReducer.ts","reducers/index.ts","index.tsx"],"names":["ActionTypes","connect","state","apps","accessRights","idx","label","handleSelect","handleDelete","canShowBacketwaste","onDragStart","onDragOver","onDragEnd","toString","onClick","className","src","cardImages","Number","length","image","status","slice","isSelected","level","Object","values","pinnedBy","some","el","keys","filter","join","togglePin","type","TOGGLE_PIN","payload","handleDrag","data","DRAG","deleteFromSelected","id","DELETE_FROM_SELECTED","map","card","key","Catalog","e","props","draggedItem","dataTransfer","effectAllowed","setDragImage","target","draggedOverItem","items","item","splice","draggedIdx","this","selectFromCatalog","deleteFromCatalog","isInCatalog","stopPropagation","React","Component","TOGGLE_SELECT","DELETE_FROM_CATALOG","ACCESS_RIGHTS","User","Admin_System","Admin_MRF","Admin_RF","accessRightsChange","CHANGE_ACCESS_RIGHTS","name","onChange","value","App","basename","to","path","exact","component","MainPage","INITAL_STATE","order","p","action","prevLevel","combineReducers","selectedItemsReducer","composeEnhancers","compose","store","createStore","reducers","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.19ba7b5f.chunk.js","sourcesContent":["import {\r\n  HandleByIdAction,\r\n  AccessRightsChangeAction,\r\n  TogglePinAction,\r\n  HandleDragAction\r\n} from \"./cards\";\r\n\r\nexport enum ActionTypes {\r\n  TOGGLE_SELECT,\r\n  DELETE_FROM_SELECTED,\r\n  CHANGE_ACCESS_RIGHTS,\r\n  DELETE_FROM_CATALOG,\r\n  TOGGLE_PIN,\r\n  DRAG\r\n}\r\n\r\nexport type Action =\r\n  | HandleByIdAction\r\n  | AccessRightsChangeAction\r\n  | TogglePinAction\r\n  | HandleDragAction;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport \"../styles/Card.css\";\r\nimport cardImages from \"../api/superheroes.json\";\r\nimport { AccessRights, App } from \"../actions\";\r\n\r\ninterface AppProps {\r\n  idx: number;\r\n  label: string;\r\n  apps: App[];\r\n  handleSelect?(e: React.MouseEvent): Function;\r\n  handleDelete?(e: React.MouseEvent): Function;\r\n  accessRights: AccessRights;\r\n  canShowBacketwaste?: boolean;\r\n  onDragStart?(e: React.DragEvent): void;\r\n  onDragOver?(e: React.DragEvent): void;\r\n  onDragEnd?(e: React.DragEvent): void;\r\n  isSelected?: boolean;\r\n}\r\n\r\nconst Card = ({\r\n  idx,\r\n  label,\r\n  apps,\r\n  handleSelect,\r\n  handleDelete,\r\n  accessRights,\r\n  canShowBacketwaste,\r\n  onDragStart,\r\n  onDragOver,\r\n  onDragEnd\r\n}: AppProps): JSX.Element => (\r\n  <div>\r\n    {label.toString() && (\r\n      <div\r\n        onClick={handleSelect}\r\n        onDragStart={onDragStart}\r\n        onDragOver={onDragOver}\r\n        onDragEnd={onDragEnd}\r\n        className=\"card\"\r\n      >\r\n        <img\r\n          className=\"card__img\"\r\n          src={`${cardImages[Number(label) % (cardImages.length - 1)].image}`}\r\n        ></img>\r\n        {accessRights.status &&\r\n          accessRights.status.slice(0, 5) === \"Admin\" &&\r\n          !canShowBacketwaste && (\r\n            <span onClick={handleDelete} className=\"card__cross\">\r\n              &#10060;\r\n            </span>\r\n          )}\r\n        {apps[idx] && apps[idx].isSelected && (\r\n          <span className=\"card__check\">&#10003;</span>\r\n        )}\r\n\r\n        {accessRights.status &&\r\n          accessRights.status.slice(0, 5) === \"Admin\" &&\r\n          accessRights.level > 0 &&\r\n          canShowBacketwaste && (\r\n            <span className=\"card__basketwaste\" onClick={handleDelete}>\r\n              &#x2612;\r\n            </span>\r\n          )}\r\n\r\n        {apps[idx] &&\r\n          Object.values(apps[idx].pinnedBy).some(el => el === true) && (\r\n            <span\r\n              className={\r\n                \"card__pin \" +\r\n                Object.keys(apps[idx].pinnedBy)\r\n                  .filter(el => apps[idx].pinnedBy[el] === true)\r\n                  .join(\" \")\r\n              }\r\n            >\r\n              &#x1F4CC;\r\n            </span>\r\n          )}\r\n        <h1 className=\"card__title\">{label}</h1>\r\n      </div>\r\n    )}\r\n  </div>\r\n);\r\n\r\nconst mapStateToProps = (state: any) => ({\r\n  apps: state.apps,\r\n  accessRights: state.accessRights\r\n});\r\n\r\nexport default connect(mapStateToProps)(Card);\r\n","import { ActionTypes } from \"./types\";\r\n\r\nexport interface PinnedBy {\r\n  [key: string]: boolean;\r\n  (level: string): number;\r\n}\r\n\r\nexport interface App {\r\n  order: number;\r\n  label: number;\r\n  isSelected: boolean;\r\n  pinnedBy: PinnedBy;\r\n  isInCatalog: boolean;\r\n}\r\n\r\nexport interface AccessRights {\r\n  status: string;\r\n  level: number;\r\n}\r\n\r\n// export interface User {\r\n//   status: string;\r\n//   level: number;\r\n// }\r\n\r\nexport interface HandleByIdAction {\r\n  type:\r\n    | ActionTypes.TOGGLE_SELECT\r\n    | ActionTypes.DELETE_FROM_SELECTED\r\n    | ActionTypes.DELETE_FROM_CATALOG;\r\n  payload: number;\r\n}\r\n\r\nexport interface AccessRightsChangeAction {\r\n  type: ActionTypes.CHANGE_ACCESS_RIGHTS;\r\n  payload: AccessRights;\r\n}\r\n\r\nexport interface TogglePinAction {\r\n  type: ActionTypes.TOGGLE_PIN;\r\n  payload: { idx: number; accessRights: AccessRights };\r\n}\r\n\r\nexport interface HandleDragAction {\r\n  type: ActionTypes.DRAG;\r\n  payload: App[];\r\n}\r\n\r\nexport const selectFromCatalog = (id: number): HandleByIdAction => {\r\n  return {\r\n    type: ActionTypes.TOGGLE_SELECT,\r\n    payload: id\r\n  };\r\n};\r\n\r\nexport const deleteFromSelected = (id: number): HandleByIdAction => {\r\n  return {\r\n    type: ActionTypes.DELETE_FROM_SELECTED,\r\n    payload: id\r\n  };\r\n};\r\n\r\nexport const deleteFromCatalog = (id: number): HandleByIdAction => {\r\n  return {\r\n    type: ActionTypes.DELETE_FROM_CATALOG,\r\n    payload: id\r\n  };\r\n};\r\n\r\nexport const accessRightsChange = (\r\n  data: AccessRights\r\n): AccessRightsChangeAction => {\r\n  return {\r\n    type: ActionTypes.CHANGE_ACCESS_RIGHTS,\r\n    payload: data\r\n  };\r\n};\r\n\r\nexport const togglePin = (\r\n  idx: number,\r\n  accessRights: AccessRights\r\n): TogglePinAction => {\r\n  return {\r\n    type: ActionTypes.TOGGLE_PIN,\r\n    payload: { idx, accessRights }\r\n  };\r\n};\r\n\r\nexport const handleDrag = (data: App[]): HandleDragAction => {\r\n  return {\r\n    type: ActionTypes.DRAG,\r\n    payload: data\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Card from \"./Card\";\r\nimport { deleteFromSelected, togglePin, handleDrag } from \"../actions\";\r\nimport \"../styles/Card.css\";\r\nimport { App } from \"../actions\";\r\n\r\ntype MainPageProps = {\r\n  apps: App[];\r\n  deleteFromSelected(idx: number): typeof deleteFromSelected;\r\n};\r\n\r\nconst MainPage = ({ apps, deleteFromSelected }: MainPageProps): JSX.Element => {\r\n  return (\r\n    <div className=\"card-container\">\r\n      {apps.map((card: App, idx: number) => {\r\n        if (\r\n          card.isSelected ||\r\n          Object.values(card.pinnedBy).some(el => el === true)\r\n        ) {\r\n          return (\r\n            <Card\r\n              idx={idx}\r\n              key={card.label}\r\n              label={card.label.toString()}\r\n              isSelected={card.isSelected}\r\n              handleDelete={() => deleteFromSelected(idx)}\r\n            />\r\n          );\r\n        }\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ apps }: { apps: App[] }): any => ({\r\n  apps\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  {\r\n    deleteFromSelected,\r\n    togglePin,\r\n    handleDrag\r\n  }\r\n)(MainPage);\r\n","import React, { DragEvent } from \"react\";\r\nimport Card from \"./Card\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  selectFromCatalog,\r\n  deleteFromCatalog,\r\n  togglePin,\r\n  handleDrag\r\n} from \"../actions\";\r\nimport { App, AccessRights } from \"../actions\";\r\nimport { StoreState } from \"../reducers\";\r\n\r\ninterface CatalogProps {\r\n  accessRights: AccessRights;\r\n  apps: App[];\r\n  selectFromCatalog(idx: number): typeof selectFromCatalog;\r\n  deleteFromCatalog(idx: number): typeof deleteFromCatalog;\r\n  togglePin(idx: number, access: AccessRights): typeof togglePin;\r\n  handleDrag(app: App[]): typeof handleDrag;\r\n}\r\n\r\nclass Catalog extends React.Component<CatalogProps> {\r\n  onDragStart = (e: React.DragEvent, idx: number): void => {\r\n    const {\r\n      accessRights: { status }\r\n    } = this.props;\r\n    if (status && status.slice(0, 5) === \"Admin\") {\r\n      this.draggedItem = this.props.apps[idx];\r\n      e.dataTransfer.effectAllowed = \"grabbing\";\r\n      e.dataTransfer.setDragImage(e.target as HTMLDivElement, 50, 50);\r\n    }\r\n  };\r\n\r\n  onDragOver = (idx: number): void => {\r\n    const { accessRights, apps, handleDrag } = this.props;\r\n    if (accessRights.status && accessRights.status.slice(0, 5) === \"Admin\") {\r\n      const draggedOverItem = apps[idx];\r\n\r\n      if (this.draggedItem === draggedOverItem) {\r\n        return;\r\n      }\r\n\r\n      let items = apps.filter(item => item !== this.draggedItem);\r\n\r\n      items.splice(idx, 0, this.draggedItem);\r\n\r\n      handleDrag(items);\r\n    }\r\n  };\r\n\r\n  onDragEnd = (): void => {\r\n    const { accessRights } = this.props;\r\n    if (accessRights.status && accessRights.status.slice(0, 5) === \"Admin\") {\r\n      this.draggedIdx = null;\r\n    }\r\n  };\r\n  // draggedItem: App;\r\n  // draggedIdx: number | void;\r\n  draggedItem: any;\r\n  draggedIdx: any;\r\n\r\n  render() {\r\n    const {\r\n      accessRights,\r\n      apps,\r\n      selectFromCatalog,\r\n      deleteFromCatalog,\r\n      togglePin\r\n    } = this.props;\r\n    return (\r\n      <div className=\"card-container\">\r\n        {apps.map(\r\n          (card, idx) =>\r\n            card.isInCatalog && (\r\n              <Card\r\n                onDragStart={(e: React.DragEvent) => this.onDragStart(e, idx)}\r\n                onDragOver={() => this.onDragOver(idx)}\r\n                onDragEnd={this.onDragEnd}\r\n                idx={idx}\r\n                label={card.label.toString()}\r\n                key={card.label}\r\n                canShowBacketwaste\r\n                handleSelect={(e: React.MouseEvent) => {\r\n                  e.stopPropagation();\r\n                  if (\r\n                    accessRights &&\r\n                    accessRights.status &&\r\n                    accessRights.status.slice(0, 5) === \"Admin\"\r\n                  )\r\n                    return togglePin(idx, accessRights);\r\n                  return selectFromCatalog(idx);\r\n                }}\r\n                handleDelete={(e: React.MouseEvent) => {\r\n                  e.stopPropagation();\r\n                  return deleteFromCatalog(idx);\r\n                }}\r\n              />\r\n            )\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ accessRights, apps }: any): StoreState => ({\r\n  accessRights,\r\n  apps\r\n});\r\n\r\nexport default connect<StoreState, {}, CatalogProps>(\r\n  mapStateToProps,\r\n  {\r\n    selectFromCatalog,\r\n    deleteFromCatalog,\r\n    togglePin,\r\n    handleDrag\r\n  }\r\n)(Catalog);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { accessRightsChange, AccessRights } from \"../actions\";\r\nimport \"../styles/Card.css\";\r\n\r\ninterface AccessControlProps {\r\n  accessRightsChange?(data: AccessRights): typeof accessRightsChange;\r\n}\r\n\r\nconst ACCESS_RIGHTS: { [key: string]: AccessRights } = {\r\n  User: { status: \"User\", level: 0 },\r\n  Admin_System: { status: \"Admin_System\", level: 1 },\r\n  Admin_MRF: { status: \"Admin_MRF\", level: 2 },\r\n  Admin_RF: { status: \"Admin_RF\", level: 3 }\r\n};\r\n\r\nconst AccessControl = ({ accessRightsChange }: any): JSX.Element => (\r\n  <div className=\"access-control__select\">\r\n    <select\r\n      name=\"access\"\r\n      id=\"access\"\r\n      onChange={e =>\r\n        accessRightsChange && accessRightsChange(ACCESS_RIGHTS[e.target.value])\r\n      }\r\n    >\r\n      {Object.values(ACCESS_RIGHTS).map(({ status }) => (\r\n        <option key={status}>{status}</option>\r\n      ))}\r\n    </select>\r\n  </div>\r\n);\r\n\r\nexport default connect(\r\n  null,\r\n  { accessRightsChange }\r\n)(AccessControl);\r\n","import React from \"react\";\r\nimport { HashRouter, Route, Switch, Link } from \"react-router-dom\";\r\nimport MainPage from \"./MainPage\";\r\nimport Catalog from \"./Catalog\";\r\nimport AccessControl from \"./AccessControl\";\r\n// import history from \"../history\";\r\n\r\nconst App = (): JSX.Element => (\r\n  <HashRouter basename=\"/\">\r\n    <nav className=\"navigation__nav\">\r\n      <Link to=\"/\">На главную</Link>\r\n      <Link to=\"/catalog\">Каталог приложений</Link>\r\n      <AccessControl />\r\n    </nav>\r\n    <Switch>\r\n      <Route path=\"/\" exact component={MainPage} />\r\n      <Route path=\"/catalog\" exact component={Catalog} />\r\n    </Switch>\r\n  </HashRouter>\r\n);\r\n\r\nexport default App;\r\n","import { App, Action, ActionTypes } from \"../actions\";\r\nimport p from \"immer\";\r\n\r\nconst INITAL_STATE = [\r\n  {\r\n    order: 0,\r\n    label: 0,\r\n    isSelected: true,\r\n    pinnedBy: { Admin_RF: true, level: 3 },\r\n    isInCatalog: true\r\n  },\r\n  {\r\n    order: 1,\r\n    label: 1,\r\n    isSelected: true,\r\n    pinnedBy: { Admin_MRF: true, level: 2 },\r\n    isInCatalog: true\r\n  },\r\n  {\r\n    order: 2,\r\n    label: 2,\r\n    isSelected: true,\r\n    pinnedBy: { Admin_System: true, level: 1 },\r\n    isInCatalog: true\r\n  },\r\n  {\r\n    order: 3,\r\n    label: 3,\r\n    isSelected: true,\r\n    pinnedBy: { level: 0 },\r\n    isInCatalog: true\r\n  },\r\n  {\r\n    order: 4,\r\n    label: 4,\r\n    isSelected: true,\r\n    pinnedBy: { level: 0 },\r\n    isInCatalog: true\r\n  },\r\n  {\r\n    order: 5,\r\n    label: 5,\r\n    isSelected: true,\r\n    pinnedBy: { level: 0 },\r\n    isInCatalog: true\r\n  },\r\n  {\r\n    order: 6,\r\n    label: 6,\r\n    isSelected: false,\r\n    pinnedBy: { level: 0 },\r\n    isInCatalog: true\r\n  },\r\n  {\r\n    order: 7,\r\n    label: 7,\r\n    isSelected: false,\r\n    pinnedBy: { level: 0 },\r\n    isInCatalog: true\r\n  },\r\n  {\r\n    order: 8,\r\n    label: 8,\r\n    isSelected: false,\r\n    pinnedBy: { level: 0 },\r\n    isInCatalog: true\r\n  },\r\n  {\r\n    order: 9,\r\n    label: 9,\r\n    isSelected: false,\r\n    pinnedBy: { level: 0 },\r\n    isInCatalog: true\r\n  },\r\n  {\r\n    order: 10,\r\n    label: 10,\r\n    isSelected: false,\r\n    pinnedBy: { level: 0 },\r\n    isInCatalog: true\r\n  },\r\n  {\r\n    order: 11,\r\n    label: 11,\r\n    isSelected: false,\r\n    pinnedBy: { level: 0 },\r\n    isInCatalog: true\r\n  },\r\n  {\r\n    order: 12,\r\n    label: 12,\r\n    isSelected: false,\r\n    pinnedBy: { level: 0 },\r\n    isInCatalog: true\r\n  },\r\n  {\r\n    order: 13,\r\n    label: 13,\r\n    isSelected: false,\r\n    pinnedBy: { level: 0 },\r\n    isInCatalog: true\r\n  },\r\n  {\r\n    order: 14,\r\n    label: 14,\r\n    isSelected: false,\r\n    pinnedBy: { level: 0 },\r\n    isInCatalog: true\r\n  },\r\n  {\r\n    order: 15,\r\n    label: 15,\r\n    isSelected: false,\r\n    pinnedBy: { level: 0 },\r\n    isInCatalog: true\r\n  },\r\n  {\r\n    order: 16,\r\n    label: 16,\r\n    isSelected: false,\r\n    pinnedBy: { level: 0 },\r\n    isInCatalog: true\r\n  },\r\n  {\r\n    order: 17,\r\n    label: 17,\r\n    isSelected: false,\r\n    pinnedBy: { level: 0 },\r\n    isInCatalog: true\r\n  },\r\n  {\r\n    order: 18,\r\n    label: 18,\r\n    isSelected: false,\r\n    pinnedBy: { level: 0 },\r\n    isInCatalog: true\r\n  }\r\n];\r\n\r\nexport default p((\r\n  state /* : Array<App> */ = INITAL_STATE,\r\n  action: any /* Action */\r\n) => {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case ActionTypes.DRAG: {\r\n      return payload;\r\n    }\r\n\r\n    case ActionTypes.DELETE_FROM_SELECTED: {\r\n      state[Number(payload)].isSelected = false;\r\n      state[Number(payload)].pinnedBy = { level: 0 };\r\n\r\n      return state;\r\n    }\r\n\r\n    case ActionTypes.DELETE_FROM_CATALOG:\r\n      state[Number(payload)].isSelected = false;\r\n      state[Number(payload)].isInCatalog = false;\r\n      state[Number(payload)].pinnedBy = { level: 0 };\r\n\r\n      return state;\r\n\r\n    case ActionTypes.TOGGLE_SELECT:\r\n      state[Number(payload)].isSelected = !state[Number(payload)].isSelected;\r\n\r\n      return state;\r\n\r\n    case ActionTypes.TOGGLE_PIN:\r\n      const {\r\n        idx,\r\n        accessRights: { status, level }\r\n      } = payload;\r\n\r\n      let prevLevel = state[idx].pinnedBy.level;\r\n\r\n      state[idx].pinnedBy[status] = !state[idx].pinnedBy[status];\r\n      state[idx].pinnedBy.level = level > prevLevel ? level : prevLevel;\r\n\r\n      return state;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n});\r\n","import { ActionTypes } from \"../actions/types\";\r\nimport { AccessRightsChangeAction } from \"../actions\";\r\nimport { AccessRights } from \"../actions\";\r\n\r\nconst INITAL_STATE = { status: \"User\", level: 0 };\r\n\r\nexport default (\r\n  state: AccessRights = INITAL_STATE,\r\n  action: AccessRightsChangeAction\r\n) => {\r\n  switch (action.type) {\r\n    case ActionTypes.CHANGE_ACCESS_RIGHTS:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from \"redux\";\r\nimport selectedItemsReducer from \"./selectedItemsReducer\";\r\nimport accessRightsReducer from \"./accessRightsReducer\";\r\nimport { App, AccessRights } from \"../actions\";\r\n\r\nexport interface StoreState {\r\n  apps: App[];\r\n  accessRights: AccessRights;\r\n}\r\n\r\nexport default combineReducers<StoreState>({\r\n  apps: selectedItemsReducer,\r\n  accessRights: accessRightsReducer\r\n});\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { createStore, compose } from \"redux\";\r\nimport App from \"./components/App\";\r\n\r\nimport reducers from \"./reducers\";\r\n\r\nconst composeEnhancers = /* window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || */ compose;\r\nconst store = createStore(reducers, composeEnhancers());\r\n\r\n// store.subscribe(() => console.log(\"STORE: \", store.getState()));\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}